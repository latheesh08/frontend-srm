{"ast":null,"code":"var _jsxFileName = \"/Users/star/Desktop/frontend-srm/src/shared/richTextEditor.js\";\nimport React, { useState } from 'react';\nimport { Editor } from '@tinymce/tinymce-react';\nimport axios from 'axios';\nconst BACKEND_API_URL = process.env.REACT_APP_BACKEND_API_URL;\nconst IMAGE_URL = process.env.REACT_APP_BACKEND_IMAGE_URL;\n\nconst RichTextEditor = props => {\n  const [isUpload, setUpload] = useState(false);\n  const [textContent, setContent] = useState('');\n\n  const handleEditorChange = (content, editor) => {\n    setContent(content);\n    props.handleDescription(content);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Editor, {\n    apiKey: \"yqzp8s3o1swniyhlgunkrtdujfe9jdii4p30czhpdex1ubaz\",\n    value: props.value,\n    init: {\n      zIndex: 0,\n      height: 500,\n      plugins: ['advlist autolink lists link image charmap print preview anchor', 'image', 'searchreplace visualblocks code', 'insertdatetime media table paste code wordcount'],\n      menubar: false,\n      images_upload_url: 'postAcceptor.php',\n      toolbar: 'undo redo | bold italic underline strikethrough | fontselect fontsizeselect formatselect | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor removeformat | pagebreak | charmap emoticons | preview save print | insertfile image media template link anchor codesample | table | ltr rtl',\n      images_upload_handler: async function (blobInfo, success, failure) {\n        // console.log(blobInfo, blobInfo.blob());\n        // // console.log(blobInfo.base64());\n        const response = await axios.post(`${BACKEND_API_URL}/feed-gallery`, {\n          file: `data:image/png;base64,${blobInfo.base64()}`,\n          type: 'news'\n        }, {\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${props.token}`\n          }\n        });\n        console.log(response.data['file-name']);\n        const successURL = `${IMAGE_URL}${response.data['file-name']}`; // const successURL = response.data[\"file-name\"];\n        // const successURL = response.data.file_name;\n        // console.log(successURL);\n\n        setTimeout(function () {\n          setUpload(true);\n          success(successURL);\n        }, 3000);\n      }\n    },\n    onEditorChange: handleEditorChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default RichTextEditor;","map":{"version":3,"sources":["/Users/star/Desktop/frontend-srm/src/shared/richTextEditor.js"],"names":["React","useState","Editor","axios","BACKEND_API_URL","process","env","REACT_APP_BACKEND_API_URL","IMAGE_URL","REACT_APP_BACKEND_IMAGE_URL","RichTextEditor","props","isUpload","setUpload","textContent","setContent","handleEditorChange","content","editor","handleDescription","value","zIndex","height","plugins","menubar","images_upload_url","toolbar","images_upload_handler","blobInfo","success","failure","response","post","file","base64","type","headers","Authorization","token","console","log","data","successURL","setTimeout"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,MAAT,QAAuB,wBAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,MAAMC,eAAe,GAAGC,OAAO,CAACC,GAAR,CAAYC,yBAApC;AACA,MAAMC,SAAS,GAAGH,OAAO,CAACC,GAAR,CAAYG,2BAA9B;;AACA,MAAMC,cAAc,GAAIC,KAAD,IAAW;AAChC,QAAM,CAACC,QAAD,EAAWC,SAAX,IAAwBZ,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACa,WAAD,EAAcC,UAAd,IAA4Bd,QAAQ,CAAC,EAAD,CAA1C;;AAEA,QAAMe,kBAAkB,GAAG,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAC9CH,IAAAA,UAAU,CAACE,OAAD,CAAV;AACAN,IAAAA,KAAK,CAACQ,iBAAN,CAAwBF,OAAxB;AACD,GAHD;;AAIA,sBACE,uDAGE,oBAAC,MAAD;AACE,IAAA,MAAM,EAAC,kDADT;AAEE,IAAA,KAAK,EAAEN,KAAK,CAACS,KAFf;AAGE,IAAA,IAAI,EAAE;AACJC,MAAAA,MAAM,EAAE,CADJ;AAEJC,MAAAA,MAAM,EAAE,GAFJ;AAGJC,MAAAA,OAAO,EAAE,CACP,gEADO,EAEP,OAFO,EAGP,iCAHO,EAIP,iDAJO,CAHL;AASJC,MAAAA,OAAO,EAAE,KATL;AAUJC,MAAAA,iBAAiB,EAAE,kBAVf;AAWJC,MAAAA,OAAO,EACL,uUAZE;AAaJC,MAAAA,qBAAqB,EAAE,gBAAgBC,QAAhB,EAA0BC,OAA1B,EAAmCC,OAAnC,EAA4C;AACjE;AACA;AACA,cAAMC,QAAQ,GAAG,MAAM5B,KAAK,CAAC6B,IAAN,CACpB,GAAE5B,eAAgB,eADE,EAErB;AACE6B,UAAAA,IAAI,EAAG,yBAAwBL,QAAQ,CAACM,MAAT,EAAkB,EADnD;AAEEC,UAAAA,IAAI,EAAE;AAFR,SAFqB,EAMrB;AACEC,UAAAA,OAAO,EAAE;AACP,4BAAgB,kBADT;AAEPC,YAAAA,aAAa,EAAG,UAAS1B,KAAK,CAAC2B,KAAM;AAF9B;AADX,SANqB,CAAvB;AAaAC,QAAAA,OAAO,CAACC,GAAR,CAAYT,QAAQ,CAACU,IAAT,CAAc,WAAd,CAAZ;AACA,cAAMC,UAAU,GAAI,GAAElC,SAAU,GAAEuB,QAAQ,CAACU,IAAT,CAAc,WAAd,CAA2B,EAA7D,CAjBiE,CAkBjE;AACA;AACA;;AACAE,QAAAA,UAAU,CAAC,YAAY;AACrB9B,UAAAA,SAAS,CAAC,IAAD,CAAT;AACAgB,UAAAA,OAAO,CAACa,UAAD,CAAP;AACD,SAHS,EAGP,IAHO,CAAV;AAID;AAtCG,KAHR;AA2CE,IAAA,cAAc,EAAE1B,kBA3ClB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,CADF;AAmDD,CA3DD;;AA6DA,eAAeN,cAAf","sourcesContent":["import React, { useState } from 'react';\nimport { Editor } from '@tinymce/tinymce-react';\nimport axios from 'axios';\nconst BACKEND_API_URL = process.env.REACT_APP_BACKEND_API_URL;\nconst IMAGE_URL = process.env.REACT_APP_BACKEND_IMAGE_URL;\nconst RichTextEditor = (props) => {\n  const [isUpload, setUpload] = useState(false);\n  const [textContent, setContent] = useState('');\n\n  const handleEditorChange = (content, editor) => {\n    setContent(content);\n    props.handleDescription(content);\n  };\n  return (\n    <>\n      {/* <div dangerouslySetInnerHTML={{ __html: textContent }} /> */}\n\n      <Editor\n        apiKey='yqzp8s3o1swniyhlgunkrtdujfe9jdii4p30czhpdex1ubaz'\n        value={props.value}\n        init={{\n          zIndex: 0,\n          height: 500,\n          plugins: [\n            'advlist autolink lists link image charmap print preview anchor',\n            'image',\n            'searchreplace visualblocks code',\n            'insertdatetime media table paste code wordcount',\n          ],\n          menubar: false,\n          images_upload_url: 'postAcceptor.php',\n          toolbar:\n            'undo redo | bold italic underline strikethrough | fontselect fontsizeselect formatselect | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor removeformat | pagebreak | charmap emoticons | preview save print | insertfile image media template link anchor codesample | table | ltr rtl',\n          images_upload_handler: async function (blobInfo, success, failure) {\n            // console.log(blobInfo, blobInfo.blob());\n            // // console.log(blobInfo.base64());\n            const response = await axios.post(\n              `${BACKEND_API_URL}/feed-gallery`,\n              {\n                file: `data:image/png;base64,${blobInfo.base64()}`,\n                type: 'news',\n              },\n              {\n                headers: {\n                  'Content-Type': 'application/json',\n                  Authorization: `Bearer ${props.token}`,\n                },\n              }\n            );\n            console.log(response.data['file-name']);\n            const successURL = `${IMAGE_URL}${response.data['file-name']}`;\n            // const successURL = response.data[\"file-name\"];\n            // const successURL = response.data.file_name;\n            // console.log(successURL);\n            setTimeout(function () {\n              setUpload(true);\n              success(successURL);\n            }, 3000);\n          },\n        }}\n        onEditorChange={handleEditorChange}\n      />\n    </>\n  );\n};\n\nexport default RichTextEditor;\n"]},"metadata":{},"sourceType":"module"}