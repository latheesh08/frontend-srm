{"ast":null,"code":"var _jsxFileName = \"/Users/star/Desktop/frontend-srm/src/app/auth/ChangePwdOTP.js\";\nimport React, { useState, useRef } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Input from \"@material-ui/core/Input\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport Button from \"@material-ui/core/Button\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Box from \"@material-ui/core/Box\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport AuthContainer from \"./AuthContainer\";\nimport AuthService from \"./AuthService\";\nimport ChangePwd from \"./ChangePwd\";\nimport phoneSvg from \"../../assets/images/Desktop Phone number.svg\";\nimport { Typography } from \"@material-ui/core\";\nconst useStyle = makeStyles(theme => ({\n  formStyle: {\n    margin: \"auto\",\n    width: \"100%\",\n    justifyContent: \"center\",\n    textAlign: \"center\",\n    paddingBttom: \"20px\"\n  },\n  boxMargin: {\n    marginTop: \"30px\",\n    \"@media (max-width:400px)\": {\n      marginTop: \"10px\"\n    }\n  },\n  fieldStyle: {\n    width: \"80%\",\n    margin: \"auto\",\n    \"& .MuiInput-underline:before\": {\n      borderBottom: \"2px solid #eaeaea\"\n    },\n    \"& .MuiInput-underline:hover:not(.Mui-disabled):before\": {\n      borderBottom: \"2px solid #7B72AF\",\n      transitionProperty: \"border-bottom-color\",\n      transitionDuration: \"500ms\",\n      transitionTimingFunction: \"cubic-bezier(0.4, 0, 0.2, 1)\"\n    }\n  },\n  inputBorder: {\n    height: \"50px\",\n    \"& span\": {\n      paddingLeft: \"10px\"\n    }\n  },\n  errorColor: {\n    color: \"red\"\n  },\n  margin: {\n    marginTop: \"30px\",\n    \"@media (max-width:400px)\": {\n      marginTop: \"10px\"\n    },\n    \"& .loginBtn\": {\n      borderRadius: \"6px\",\n      marginTop: \"10px\",\n      marginBotton: \"10px\" // opacity: '0.5',\n\n    }\n  }\n}));\n\nconst ChangePwdOTP = props => {\n  const classes = useStyle();\n  const otp_ref = useRef(null);\n  let [isDisable, setdisable] = useState(true);\n  let [otp, setotp] = useState(\"\");\n  const [otpSubmit, setOtpSubmit] = useState(false);\n  const [pwdToken, setPwdToken] = useState(\"\");\n  const history = useHistory();\n  const [errMessage, setError] = useState(\"\");\n  const otpToken = props.token;\n\n  async function validateOtpFunction() {\n    try {\n      props.handleLoading(true);\n      const response = await AuthService.otpValidate(otpToken, {\n        otp: otp\n      });\n      props.handleLoading(false);\n\n      if (response.status === 200) {\n        setPwdToken(response.data.data.token);\n        setOtpSubmit(true);\n      }\n    } catch (error) {\n      setError(\"OTP is not correct\");\n      props.handleLoading(false);\n    }\n  }\n\n  const submitForm = event => {\n    event.preventDefault();\n    console.log(\"OTP Submited\");\n    validateOtpFunction();\n  };\n\n  const validate = event => {\n    let name = event.target.name;\n    setError(\"\");\n    const otp_re = /^[0-9]{6}$/gm;\n\n    if (name === \"otp\") {\n      setotp(otp = event.target.value);\n    }\n\n    if (otp_re.test(otp)) {\n      setdisable(false);\n    } else {\n      setdisable(true);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, otpSubmit ? /*#__PURE__*/React.createElement(ChangePwd, {\n    token: pwdToken,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(AuthContainer, {\n    title: \"Forgot Password?\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    className: classes.boxMargin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    className: `${classes.errorColor}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, errMessage), /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.formStyle,\n    onSubmit: submitForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    className: classes.margin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    className: classes.fieldStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    id: \"otp\",\n    ref: otp_ref,\n    name: \"otp\",\n    className: classes.inputBorder,\n    type: \"text\",\n    onChange: validate,\n    placeholder: \"Enter OTP\",\n    startAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n      position: \"start\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: phoneSvg,\n      width: \"40px\",\n      alt: \"Phone SVG\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 25\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(Box, {\n    className: classes.margin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    id: \"otpSubmit\",\n    type: \"submit\",\n    variant: \"contained\",\n    className: `${classes.fieldStyle} ${\"loginBtn\"}`,\n    color: \"primary\",\n    disabled: isDisable,\n    disableElevation: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  }, \"SUBMIT\"))))));\n};\n\nexport default ChangePwdOTP;","map":{"version":3,"sources":["/Users/star/Desktop/frontend-srm/src/app/auth/ChangePwdOTP.js"],"names":["React","useState","useRef","useHistory","Input","InputAdornment","Button","FormControl","Box","makeStyles","AuthContainer","AuthService","ChangePwd","Typography","useStyle","theme","formStyle","margin","width","justifyContent","textAlign","paddingBttom","boxMargin","marginTop","fieldStyle","borderBottom","transitionProperty","transitionDuration","transitionTimingFunction","inputBorder","height","paddingLeft","errorColor","color","borderRadius","marginBotton","ChangePwdOTP","props","classes","otp_ref","isDisable","setdisable","otp","setotp","otpSubmit","setOtpSubmit","pwdToken","setPwdToken","history","errMessage","setError","otpToken","token","validateOtpFunction","handleLoading","response","otpValidate","status","data","error","submitForm","event","preventDefault","console","log","validate","name","target","otp_re","value","test","phoneSvg"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,MAA1B,QAAwC,OAAxC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AACA,SAASC,UAAT,QAA2B,qBAA3B;AAEA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,SAAP,MAAsB,aAAtB;;AAGA,SAASC,UAAT,QAA2B,mBAA3B;AAEA,MAAMC,QAAQ,GAAGL,UAAU,CAAEM,KAAD,KAAY;AACtCC,EAAAA,SAAS,EAAE;AACTC,IAAAA,MAAM,EAAE,MADC;AAETC,IAAAA,KAAK,EAAE,MAFE;AAGTC,IAAAA,cAAc,EAAE,QAHP;AAITC,IAAAA,SAAS,EAAE,QAJF;AAKTC,IAAAA,YAAY,EAAE;AALL,GAD2B;AAQtCC,EAAAA,SAAS,EAAE;AACTC,IAAAA,SAAS,EAAE,MADF;AAET,gCAA4B;AAC1BA,MAAAA,SAAS,EAAE;AADe;AAFnB,GAR2B;AActCC,EAAAA,UAAU,EAAE;AACVN,IAAAA,KAAK,EAAE,KADG;AAEVD,IAAAA,MAAM,EAAE,MAFE;AAGV,oCAAgC;AAC9BQ,MAAAA,YAAY,EAAE;AADgB,KAHtB;AAMV,6DAAyD;AACvDA,MAAAA,YAAY,EAAE,mBADyC;AAEvDC,MAAAA,kBAAkB,EAAE,qBAFmC;AAGvDC,MAAAA,kBAAkB,EAAE,OAHmC;AAIvDC,MAAAA,wBAAwB,EAAE;AAJ6B;AAN/C,GAd0B;AA2BtCC,EAAAA,WAAW,EAAE;AACXC,IAAAA,MAAM,EAAE,MADG;AAEX,cAAU;AACRC,MAAAA,WAAW,EAAE;AADL;AAFC,GA3ByB;AAiCtCC,EAAAA,UAAU,EAAE;AACVC,IAAAA,KAAK,EAAE;AADG,GAjC0B;AAoCtChB,EAAAA,MAAM,EAAE;AACNM,IAAAA,SAAS,EAAE,MADL;AAEN,gCAA4B;AAC1BA,MAAAA,SAAS,EAAE;AADe,KAFtB;AAMN,mBAAe;AACbW,MAAAA,YAAY,EAAE,KADD;AAEbX,MAAAA,SAAS,EAAE,MAFE;AAGbY,MAAAA,YAAY,EAAE,MAHD,CAIb;;AAJa;AANT;AApC8B,CAAZ,CAAD,CAA3B;;AAmDA,MAAMC,YAAY,GAAIC,KAAD,IAAW;AAC9B,QAAMC,OAAO,GAAGxB,QAAQ,EAAxB;AACA,QAAMyB,OAAO,GAAGrC,MAAM,CAAC,IAAD,CAAtB;AACA,MAAI,CAACsC,SAAD,EAAYC,UAAZ,IAA0BxC,QAAQ,CAAC,IAAD,CAAtC;AACA,MAAI,CAACyC,GAAD,EAAMC,MAAN,IAAgB1C,QAAQ,CAAC,EAAD,CAA5B;AACA,QAAM,CAAC2C,SAAD,EAAYC,YAAZ,IAA4B5C,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAAC6C,QAAD,EAAWC,WAAX,IAA0B9C,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM+C,OAAO,GAAG7C,UAAU,EAA1B;AACA,QAAM,CAAC8C,UAAD,EAAaC,QAAb,IAAyBjD,QAAQ,CAAC,EAAD,CAAvC;AACA,QAAMkD,QAAQ,GAAGd,KAAK,CAACe,KAAvB;;AAEA,iBAAeC,mBAAf,GAAqC;AACnC,QAAI;AACFhB,MAAAA,KAAK,CAACiB,aAAN,CAAoB,IAApB;AACA,YAAMC,QAAQ,GAAG,MAAM5C,WAAW,CAAC6C,WAAZ,CAAwBL,QAAxB,EAAkC;AAAET,QAAAA,GAAG,EAAEA;AAAP,OAAlC,CAAvB;AACAL,MAAAA,KAAK,CAACiB,aAAN,CAAoB,KAApB;;AACA,UAAIC,QAAQ,CAACE,MAAT,KAAoB,GAAxB,EAA6B;AAC3BV,QAAAA,WAAW,CAACQ,QAAQ,CAACG,IAAT,CAAcA,IAAd,CAAmBN,KAApB,CAAX;AACAP,QAAAA,YAAY,CAAC,IAAD,CAAZ;AACD;AACF,KARD,CAQE,OAAOc,KAAP,EAAc;AACdT,MAAAA,QAAQ,CAAC,oBAAD,CAAR;AACAb,MAAAA,KAAK,CAACiB,aAAN,CAAoB,KAApB;AACD;AACF;;AACD,QAAMM,UAAU,GAAIC,KAAD,IAAW;AAC5BA,IAAAA,KAAK,CAACC,cAAN;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAX,IAAAA,mBAAmB;AACpB,GAJD;;AAMA,QAAMY,QAAQ,GAAIJ,KAAD,IAAW;AAC1B,QAAIK,IAAI,GAAGL,KAAK,CAACM,MAAN,CAAaD,IAAxB;AACAhB,IAAAA,QAAQ,CAAC,EAAD,CAAR;AACA,UAAMkB,MAAM,GAAG,cAAf;;AACA,QAAIF,IAAI,KAAK,KAAb,EAAoB;AAClBvB,MAAAA,MAAM,CAAED,GAAG,GAAGmB,KAAK,CAACM,MAAN,CAAaE,KAArB,CAAN;AACD;;AACD,QAAID,MAAM,CAACE,IAAP,CAAY5B,GAAZ,CAAJ,EAAsB;AACpBD,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KAFD,MAEO;AACLA,MAAAA,UAAU,CAAC,IAAD,CAAV;AACD;AACF,GAZD;;AAcA,sBACE,0CACGG,SAAS,gBACR,oBAAC,SAAD;AAAW,IAAA,KAAK,EAAEE,QAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADQ,gBAGR,oBAAC,aAAD;AAAe,IAAA,KAAK,EAAC,kBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAK,IAAA,SAAS,EAAER,OAAO,CAAChB,SAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,UAAD;AAAY,IAAA,SAAS,EAAG,GAAEgB,OAAO,CAACN,UAAW,EAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGiB,UADH,CAFF,eAME;AAAM,IAAA,SAAS,EAAEX,OAAO,CAACtB,SAAzB;AAAoC,IAAA,QAAQ,EAAE4C,UAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAK,IAAA,SAAS,EAAEtB,OAAO,CAACrB,MAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD;AAAa,IAAA,SAAS,EAAEqB,OAAO,CAACd,UAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AACE,IAAA,EAAE,EAAC,KADL;AAEE,IAAA,GAAG,EAAEe,OAFP;AAGE,IAAA,IAAI,EAAC,KAHP;AAIE,IAAA,SAAS,EAAED,OAAO,CAACT,WAJrB;AAKE,IAAA,IAAI,EAAC,MALP;AAME,IAAA,QAAQ,EAAEoC,QANZ;AAOE,IAAA,WAAW,EAAC,WAPd;AAQE,IAAA,cAAc,eACZ,oBAAC,cAAD;AAAgB,MAAA,QAAQ,EAAC,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,GAAG,EAAEM,QAAV;AAAoB,MAAA,KAAK,EAAC,MAA1B;AAAiC,MAAA,GAAG,EAAC,WAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CATJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CADF,eAoBE,oBAAC,GAAD;AAAK,IAAA,SAAS,EAAEjC,OAAO,CAACrB,MAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,EAAE,EAAC,WADL;AAEE,IAAA,IAAI,EAAC,QAFP;AAGE,IAAA,OAAO,EAAC,WAHV;AAIE,IAAA,SAAS,EAAG,GAAEqB,OAAO,CAACd,UAAW,IAAG,UAAW,EAJjD;AAKE,IAAA,KAAK,EAAC,SALR;AAME,IAAA,QAAQ,EAAEgB,SANZ;AAOE,IAAA,gBAAgB,MAPlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CApBF,CANF,CADF,CAJJ,CADF;AAmDD,CAhGD;;AAkGA,eAAeJ,YAAf","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Input from \"@material-ui/core/Input\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport Button from \"@material-ui/core/Button\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Box from \"@material-ui/core/Box\";\nimport { makeStyles } from \"@material-ui/styles\";\n\nimport AuthContainer from \"./AuthContainer\";\nimport AuthService from \"./AuthService\";\nimport ChangePwd from \"./ChangePwd\";\n\nimport phoneSvg from \"../../assets/images/Desktop Phone number.svg\";\nimport { Typography } from \"@material-ui/core\";\n\nconst useStyle = makeStyles((theme) => ({\n  formStyle: {\n    margin: \"auto\",\n    width: \"100%\",\n    justifyContent: \"center\",\n    textAlign: \"center\",\n    paddingBttom: \"20px\",\n  },\n  boxMargin: {\n    marginTop: \"30px\",\n    \"@media (max-width:400px)\": {\n      marginTop: \"10px\",\n    },\n  },\n  fieldStyle: {\n    width: \"80%\",\n    margin: \"auto\",\n    \"& .MuiInput-underline:before\": {\n      borderBottom: \"2px solid #eaeaea\",\n    },\n    \"& .MuiInput-underline:hover:not(.Mui-disabled):before\": {\n      borderBottom: \"2px solid #7B72AF\",\n      transitionProperty: \"border-bottom-color\",\n      transitionDuration: \"500ms\",\n      transitionTimingFunction: \"cubic-bezier(0.4, 0, 0.2, 1)\",\n    },\n  },\n  inputBorder: {\n    height: \"50px\",\n    \"& span\": {\n      paddingLeft: \"10px\",\n    },\n  },\n  errorColor: {\n    color: \"red\",\n  },\n  margin: {\n    marginTop: \"30px\",\n    \"@media (max-width:400px)\": {\n      marginTop: \"10px\",\n    },\n\n    \"& .loginBtn\": {\n      borderRadius: \"6px\",\n      marginTop: \"10px\",\n      marginBotton: \"10px\",\n      // opacity: '0.5',\n    },\n  },\n}));\n\nconst ChangePwdOTP = (props) => {\n  const classes = useStyle();\n  const otp_ref = useRef(null);\n  let [isDisable, setdisable] = useState(true);\n  let [otp, setotp] = useState(\"\");\n  const [otpSubmit, setOtpSubmit] = useState(false);\n  const [pwdToken, setPwdToken] = useState(\"\");\n  const history = useHistory();\n  const [errMessage, setError] = useState(\"\");\n  const otpToken = props.token;\n\n  async function validateOtpFunction() {\n    try {\n      props.handleLoading(true);\n      const response = await AuthService.otpValidate(otpToken, { otp: otp });\n      props.handleLoading(false);\n      if (response.status === 200) {\n        setPwdToken(response.data.data.token);\n        setOtpSubmit(true);\n      }\n    } catch (error) {\n      setError(\"OTP is not correct\");\n      props.handleLoading(false);\n    }\n  }\n  const submitForm = (event) => {\n    event.preventDefault();\n    console.log(\"OTP Submited\");\n    validateOtpFunction();\n  };\n\n  const validate = (event) => {\n    let name = event.target.name;\n    setError(\"\");\n    const otp_re = /^[0-9]{6}$/gm;\n    if (name === \"otp\") {\n      setotp((otp = event.target.value));\n    }\n    if (otp_re.test(otp)) {\n      setdisable(false);\n    } else {\n      setdisable(true);\n    }\n  };\n\n  return (\n    <>\n      {otpSubmit ? (\n        <ChangePwd token={pwdToken} />\n      ) : (\n        <AuthContainer title=\"Forgot Password?\">\n          <div>\n            <Box className={classes.boxMargin}></Box>\n            <Typography className={`${classes.errorColor}`}>\n              {errMessage}\n            </Typography>\n\n            <form className={classes.formStyle} onSubmit={submitForm}>\n              <Box className={classes.margin}>\n                <FormControl className={classes.fieldStyle}>\n                  <Input\n                    id=\"otp\"\n                    ref={otp_ref}\n                    name=\"otp\"\n                    className={classes.inputBorder}\n                    type=\"text\"\n                    onChange={validate}\n                    placeholder=\"Enter OTP\"\n                    startAdornment={\n                      <InputAdornment position=\"start\">\n                        <img src={phoneSvg} width=\"40px\" alt=\"Phone SVG\" />\n                      </InputAdornment>\n                    }\n                  />\n                </FormControl>\n              </Box>\n\n              <Box className={classes.margin}>\n                <Button\n                  id=\"otpSubmit\"\n                  type=\"submit\"\n                  variant=\"contained\"\n                  className={`${classes.fieldStyle} ${\"loginBtn\"}`}\n                  color=\"primary\"\n                  disabled={isDisable}\n                  disableElevation\n                >\n                  SUBMIT\n                </Button>\n              </Box>\n            </form>\n          </div>\n        </AuthContainer>\n      )}\n    </>\n  );\n};\n\nexport default ChangePwdOTP;\n"]},"metadata":{},"sourceType":"module"}