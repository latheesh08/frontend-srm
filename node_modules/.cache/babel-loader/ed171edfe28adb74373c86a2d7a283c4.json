{"ast":null,"code":"var _jsxFileName = \"/Users/star/Desktop/frontend-srm/src/app/home/studentHome/AnnouncementCard.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport * as moment from \"moment\";\nimport Reminder from \"./Reminder\";\nimport HomeService from \"../HomeSerivce\";\nimport { dateDiff } from \"../../../shared/datediff\";\nimport remindersvg from \"../../../assets/images/home/reminder.svg\"; // import testImg from \"../../assets/images/home/testImg.png\";\n\nconst useStyle = makeStyles(theme => ({\n  card: {\n    width: \"100%\",\n    margin: \"auto\",\n    marginTop: \"20px\",\n    borderRadius: \"10px\",\n    boxShadow: \"none\"\n  },\n  reminder: {\n    float: \"right\",\n    padding: \"2px\"\n  },\n  cardContent: {\n    padding: \"16px 16px 16px 16px\"\n  },\n  contentMargin: {\n    marginTop: \"16px\"\n  },\n  cardHeader: {\n    width: \"100%\"\n  },\n  title: {\n    fontWeight: \"bold\",\n    fontStyle: \"normal\",\n    fontSize: \"14px\",\n    cursor: \"pointer\",\n    \"&:hover\": {\n      textDecoration: \"underline\"\n    }\n  },\n  announcementText: {\n    fontStyle: \"normal\",\n    fontSize: \"14px\"\n  },\n  announcementImg: {\n    justifyContent: \"center\",\n    textAlign: \"center\",\n    \"& img\": {\n      maxWidth: \"100%\",\n      border: `1px solid ${theme.palette.common.deluge}`,\n      borderRadius: \"4px\"\n    }\n  }\n}));\n\nconst AnnouncementCard = props => {\n  const classes = useStyle();\n  const history = useHistory();\n  const [openReminder, setOpenReminder] = useState(false);\n  const [reminderDays, setReminderDays] = useState(null);\n  const [reminderIcon, setReminderIcon] = useState(true);\n  const [entityReminderDate, setEntityReminderDate] = useState(null);\n  const [reminderId, setReminderId] = useState(null); // const [announcementShow, setShow] = useState(false);\n  // useEffect(() => {\n  //   if (announcementShow) {\n  //     announceShow();\n  //   }\n  // }, [announcementShow]);\n\n  useEffect(() => {\n    const fetchReminder = async () => {\n      try {\n        const response = await HomeService.fetchReminder(props.token, \"news\", props.announcement.id);\n\n        if (response.data.data) {\n          setEntityReminderDate(response.data.data.entity_date);\n          setReminderId(response.data.data.id);\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    if (props.announcement.event_date) {\n      const response = dateDiff(props.announcement.event_date);\n\n      if (!response) {\n        setReminderIcon(false);\n      }\n    } else {\n      setReminderIcon(false);\n    }\n\n    fetchReminder();\n  }, []);\n\n  const handleReminderOpen = () => {\n    const response = dateDiff(props.announcement.event_date);\n\n    if (response) {\n      setOpenReminder(true);\n      setReminderDays(response);\n    }\n  };\n\n  const handleReminderClose = async checkboxes => {\n    setOpenReminder(false);\n\n    try {\n      if (checkboxes.oneDayBefore === false && checkboxes.twoDayBefore === false && !checkboxes.threeDayBefore) {} else {\n        let entityDate = {};\n\n        if (checkboxes.oneDayBefore === true) {\n          entityDate[\"1_day_before\"] = moment(props.eventDate).subtract(1, \"days\").format(\"YYYY-MM-DD\");\n        }\n\n        if (checkboxes.twoDayBefore === true) {\n          entityDate[\"2_day_before\"] = moment(props.eventDate).subtract(2, \"days\").format(\"YYYY-MM-DD\");\n        }\n\n        if (checkboxes.threeDayBefore === true) {\n          entityDate[\"3_day_before\"] = moment(props.eventDate).subtract(3, \"days\").format(\"YYYY-MM-DD\");\n        }\n\n        if (entityReminderDate) {\n          const response = await HomeService.updateReminder({\n            entity_id: props.announcement.id,\n            entity_date: entityDate,\n            entity_type: \"news\"\n          }, props.token, reminderId);\n          setEntityReminderDate({ ...response.data.data.entity_date\n          });\n        } else {\n          const response = await HomeService.setReminder({\n            entity_id: props.announcement.id,\n            entity_date: entityDate,\n            entity_type: \"news\"\n          }, props.token);\n          setEntityReminderDate({ ...response.data.data.entity_date\n          });\n        }\n      } // const response =await HomeService.setReminder()\n\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    justify: \"center\",\n    alignContent: \"center\",\n    className: classes.cardContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: classes.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    className: classes.cardContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.cardHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, reminderIcon ? /*#__PURE__*/React.createElement(\"img\", {\n    className: classes.reminder,\n    src: remindersvg,\n    alt: \"reminder\",\n    onClick: handleReminderOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 17\n    }\n  }) : \"\", /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    className: classes.title,\n    onClick: () => {\n      history.push(`/news/${props.announcement.id}`);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 15\n    }\n  }, props.announcement.title, props.announcement.event_date ? \":\" + props.announcement.event_date : \"\")), props.announcement.media_url && /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    className: `${classes.announcementImg} ${classes.contentMargin}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: props.announcement.media_url,\n    alt: \"Announcement\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    className: classes.contentMargin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.announcementText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 15\n    }\n  }, props.announcement.summary, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 17\n    }\n  }), `Published Date:${props.announcement.published_date}`))))), openReminder ? /*#__PURE__*/React.createElement(Reminder, {\n    open: openReminder,\n    onClose: handleReminderClose,\n    days: reminderDays,\n    id: props.announcement.id,\n    eventDate: props.announcement.event_date,\n    entityDate: entityReminderDate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 9\n    }\n  }) : \"\");\n};\n\nconst mapStateToProps = state => {\n  return {\n    token: state.auth.token\n  };\n};\n\nexport default connect(mapStateToProps)(AnnouncementCard);","map":{"version":3,"sources":["/Users/star/Desktop/frontend-srm/src/app/home/studentHome/AnnouncementCard.js"],"names":["React","useState","useEffect","connect","useHistory","Grid","Card","CardContent","makeStyles","Typography","moment","Reminder","HomeService","dateDiff","useStyle","theme","card","width","margin","marginTop","borderRadius","boxShadow","reminder","float","padding","cardContent","contentMargin","cardHeader","title","fontWeight","fontStyle","fontSize","cursor","textDecoration","announcementText","announcementImg","justifyContent","textAlign","maxWidth","border","palette","common","deluge","AnnouncementCard","props","classes","history","openReminder","setOpenReminder","reminderDays","setReminderDays","reminderIcon","setReminderIcon","entityReminderDate","setEntityReminderDate","reminderId","setReminderId","fetchReminder","response","token","announcement","id","data","entity_date","e","console","log","event_date","handleReminderOpen","handleReminderClose","checkboxes","oneDayBefore","twoDayBefore","threeDayBefore","entityDate","eventDate","subtract","format","updateReminder","entity_id","entity_type","setReminder","cardContainer","remindersvg","push","media_url","summary","published_date","mapStateToProps","state","auth"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\n\nimport Grid from \"@material-ui/core/Grid\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport * as moment from \"moment\";\nimport Reminder from \"./Reminder\";\nimport HomeService from \"../HomeSerivce\";\nimport { dateDiff } from \"../../../shared/datediff\";\nimport remindersvg from \"../../../assets/images/home/reminder.svg\";\n// import testImg from \"../../assets/images/home/testImg.png\";\n\nconst useStyle = makeStyles((theme) => ({\n  card: {\n    width: \"100%\",\n    margin: \"auto\",\n    marginTop: \"20px\",\n    borderRadius: \"10px\",\n    boxShadow: \"none\",\n  },\n  reminder: {\n    float: \"right\",\n    padding: \"2px\",\n  },\n  cardContent: {\n    padding: \"16px 16px 16px 16px\",\n  },\n  contentMargin: {\n    marginTop: \"16px\",\n  },\n  cardHeader: {\n    width: \"100%\",\n  },\n  title: {\n    fontWeight: \"bold\",\n    fontStyle: \"normal\",\n    fontSize: \"14px\",\n    cursor: \"pointer\",\n    \"&:hover\": {\n      textDecoration: \"underline\",\n    },\n  },\n  announcementText: {\n    fontStyle: \"normal\",\n    fontSize: \"14px\",\n  },\n  announcementImg: {\n    justifyContent: \"center\",\n    textAlign: \"center\",\n    \"& img\": {\n      maxWidth: \"100%\",\n      border: `1px solid ${theme.palette.common.deluge}`,\n      borderRadius: \"4px\",\n    },\n  },\n}));\n\nconst AnnouncementCard = (props) => {\n  const classes = useStyle();\n  const history = useHistory();\n  const [openReminder, setOpenReminder] = useState(false);\n  const [reminderDays, setReminderDays] = useState(null);\n  const [reminderIcon, setReminderIcon] = useState(true);\n  const [entityReminderDate, setEntityReminderDate] = useState(null);\n  const [reminderId, setReminderId] = useState(null);\n  // const [announcementShow, setShow] = useState(false);\n  // useEffect(() => {\n  //   if (announcementShow) {\n  //     announceShow();\n  //   }\n  // }, [announcementShow]);\n\n  useEffect(() => {\n    const fetchReminder = async () => {\n      try {\n        const response = await HomeService.fetchReminder(\n          props.token,\n          \"news\",\n          props.announcement.id\n        );\n        if (response.data.data) {\n          setEntityReminderDate(response.data.data.entity_date);\n          setReminderId(response.data.data.id);\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    };\n    if (props.announcement.event_date) {\n      const response = dateDiff(props.announcement.event_date);\n      if (!response) {\n        setReminderIcon(false);\n      }\n    } else {\n      setReminderIcon(false);\n    }\n\n    fetchReminder();\n  }, []);\n\n  const handleReminderOpen = () => {\n    const response = dateDiff(props.announcement.event_date);\n    if (response) {\n      setOpenReminder(true);\n      setReminderDays(response);\n    }\n  };\n  const handleReminderClose = async (checkboxes) => {\n    setOpenReminder(false);\n    try {\n      if (\n        checkboxes.oneDayBefore === false &&\n        checkboxes.twoDayBefore === false &&\n        !checkboxes.threeDayBefore\n      ) {\n      } else {\n        let entityDate = {};\n        if (checkboxes.oneDayBefore === true) {\n          entityDate[\"1_day_before\"] = moment(props.eventDate)\n            .subtract(1, \"days\")\n            .format(\"YYYY-MM-DD\");\n        }\n        if (checkboxes.twoDayBefore === true) {\n          entityDate[\"2_day_before\"] = moment(props.eventDate)\n            .subtract(2, \"days\")\n            .format(\"YYYY-MM-DD\");\n        }\n        if (checkboxes.threeDayBefore === true) {\n          entityDate[\"3_day_before\"] = moment(props.eventDate)\n            .subtract(3, \"days\")\n            .format(\"YYYY-MM-DD\");\n        }\n        if (entityReminderDate) {\n          const response = await HomeService.updateReminder(\n            {\n              entity_id: props.announcement.id,\n              entity_date: entityDate,\n              entity_type: \"news\",\n            },\n            props.token,\n            reminderId\n          );\n          setEntityReminderDate({ ...response.data.data.entity_date });\n        } else {\n          const response = await HomeService.setReminder(\n            {\n              entity_id: props.announcement.id,\n              entity_date: entityDate,\n              entity_type: \"news\",\n            },\n            props.token\n          );\n          setEntityReminderDate({ ...response.data.data.entity_date });\n        }\n      }\n      // const response =await HomeService.setReminder()\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  return (\n    <>\n      <Grid\n        container\n        direction=\"row\"\n        justify=\"center\"\n        alignContent=\"center\"\n        className={classes.cardContainer}\n      >\n        <Card className={classes.card}>\n          <CardContent className={classes.cardContent}>\n            <div className={classes.cardHeader}>\n              {/* <Link\n                to={{\n                  pathname: `/news/${props.announcement.id}`,\n                  announcementData: props.announcement,\n                }}\n              >\n                {props.announcement.title}\n              </Link> */}\n\n              {reminderIcon ? (\n                <img\n                  className={classes.reminder}\n                  src={remindersvg}\n                  alt=\"reminder\"\n                  onClick={handleReminderOpen}\n                ></img>\n              ) : (\n                \"\"\n              )}\n              <Typography\n                variant=\"h6\"\n                className={classes.title}\n                onClick={() => {\n                  history.push(`/news/${props.announcement.id}`);\n                }}\n              >\n                {props.announcement.title}\n                {props.announcement.event_date\n                  ? \":\" + props.announcement.event_date\n                  : \"\"}\n              </Typography>\n            </div>\n\n            {/* Conditional rendering of Grid based on availablity image */}\n\n            {props.announcement.media_url && (\n              <Grid\n                container\n                direction=\"row\"\n                className={`${classes.announcementImg} ${classes.contentMargin}`}\n              >\n                <img\n                  src={props.announcement.media_url}\n                  alt=\"Announcement\"\n                ></img>\n              </Grid>\n            )}\n            <Grid container direction=\"row\" className={classes.contentMargin}>\n              <Typography className={classes.announcementText}>\n                {props.announcement.summary}\n                <br />\n                <br />\n                {`Published Date:${props.announcement.published_date}`}\n              </Typography>\n            </Grid>\n          </CardContent>\n        </Card>\n      </Grid>\n      {openReminder ? (\n        <Reminder\n          open={openReminder}\n          onClose={handleReminderClose}\n          days={reminderDays}\n          id={props.announcement.id}\n          eventDate={props.announcement.event_date}\n          entityDate={entityReminderDate}\n        />\n      ) : (\n        \"\"\n      )}\n    </>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    token: state.auth.token,\n  };\n};\nexport default connect(mapStateToProps)(AnnouncementCard);\n"]},"metadata":{},"sourceType":"module"}